---
# tasks file for apache

- name: Update apt repo
  apt: 
    update_cache: yes

- name: install apache2
  apt: 
    name: apache2 
    state: latest

- name: install libxml2-dev
  apt: 
    name: libxml2-dev 
    state: latest
  become: true

- name: restart apache
  service:
      name: apache2
      state: restarted
  become: true

- apache2_module:
    state: present
    name: proxy
  become: true


- apache2_module:
    state: present
    name: proxy_balancer
  become: true


- apache2_module:
    state: present
    name: proxy_http
  become: true


- apache2_module:
    state: present
    name: headers
  become: true


- apache2_module:
    state: present
    name: lbmethod_bytraffic
  become: true


- apache2_module:
    state: present
    name: rewrite
  become: true



# - name: start apache
#   service:
#       name: apache2
#       state: started
#   become: true

- name: copy 000-default.conf
  copy:
    src: ../files/000-default.conf
    dest: /etc/apache2/sites-available/000-default.conf
  become: true


- name: restart apache
  service:
      name: apache2
      state: restarted
  become: true